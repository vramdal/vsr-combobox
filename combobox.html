<link rel="import" href="bower_components/polymer/polymer.html">
<polymer-element name="vsr-combobox" attributes="size">
    <script>
        Polymer('vsr-combobox', {
            size: 20,

            domReady: function () {
                this.datalistEl = this.shadowRoot.host.querySelector("datalist");
                this.suggestionsEl = this.$["suggestions"];
                this.suggestionsEl.style.display = "none";
                this.$["type-box"].addEventListener("click", this.displaySuggestions.bind(this), false);
/*
                this.$["type-box"].addEventListener("keypress", function (evt) {
                });
*/
            },
            displaySuggestions: function() {
                if (this.suggestionsEl.style.display != "none") {
                    this.suggestionsEl.style.display = "none";
                    return;
                }
                var options = this.datalistEl.querySelectorAll("option");
                this.suggestionsEl.innerHTML = "";
                for (var i = 0; i < options.length; i++) {
                    var option = options[i];
                    this.suggestionsEl.innerHTML += "<tr id=\"" + options[i].value + "\"><td>" + options[i].innerText + "</td></tr>"
                }
                this.suggestionsEl.style.display = "table";
            }

        });
    </script>
    <template>
        <style>
            #flex1 {
                display: flex;
                align-content: stretch;
            }
            input {
                width: 100%;
            }
            #dropdownButton {
                border: outset 1px;
            }
            #suggestions {
                border-collapse: collapse;
                width: 100%;
            }
            #suggestions td {
                border: 1px solid gray;
            }
        </style>
        <div id="flex1">
            <input type="text" id="type-box" size="{{size}}"/><span id="dropdownButton">â–¼</span>
        </div>
        <table id="suggestions"></table>
        <content></content>
    </template>
</polymer-element>